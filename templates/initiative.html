<style type="text/css">
form.speedFactorInitiative .hidden { display: none; }
form.speedFactorInitiative input[type=checkbox] { width: 1rem; height: 1rem; margin: 0;}
form.speedFactorInitiative section
{
	display: grid;
	border: 2px groove #eee;
	margin: 0.1rem;
	padding-left: 0.2rem;
	padding-right: 0.2rem;
	gap: 0.2rem;
	grid-template-columns: 6rem auto 6rem auto;
	align-items: center;
}
form.speedFactorInitiative section.span
{
	display: grid;
	border: 2px groove #eee;
	margin: 0.1rem;
	padding-left: 0.2rem;
	padding-right: 0.2rem;
	gap: 0.2rem;
	grid-template-columns: 6rem auto;
	align-items: center;
}
form.speedFactorInitiative div.helperText
{
	grid-column: span 2;
	font-size: 85%;
	font-style: italic;
	opacity: 75%;
}
</style>
<script language="JavaScript">
function updateInitModTotal()
{
	let modDex = parseInt({{init-mod-dex}});
	let modSize = parseInt({{init-mod-size}});
	let modAction = parseInt(SFI_actionModifiers[parseInt($("select#init-mod-action").val())]?.mod ?? 0);
	$("input#init-mod-total").val(modDex + modSize + modAction);
}
$(document).ready(function(){
	updateInitModTotal();
	$("select#init-mod-action").change(function()
	{
		updateInitModTotal();
	});
});
</script>
<form class="speedFactorInitiative">
	<section>
		<label for="init-mod-dex">Dex Modifier:</label>
		<input type="text" disabled=disabled name="init-mod-dex" id="init-mod-dex" value="{{init-mod-dex}}" />
		<label for="init-mod-size">Size Modifier:</label>
		<input type="text" disabled=disabled name="init-mod-size" id="init-mod-size" value="{{init-mod-size}}" />
	</section>
	<section>
		<label for="init-mod-action">Action:</label>
		<select name="init-mod-action" id="init-mod-action">
			{{#each this.actions as |actionOption key|}}
			<option value="{{key}}"{{#eq last-action key}} selected{{/eq}}>{{actionOption.namePadded}}</value>
			{{/each}}
		</select>
	</section>
	<section class="span">
		<label for="init-mod-total">Total Modifier:</label>
		<input type="text" disabled=disabled name="init-mod-total" id="init-mod-total" value="" />
	</section>
	<section class="span">
		<label for="init-roll">Roll Override:</label>
		<input type="text" name="init-roll" id="init-roll" />
		<div class="helperText">If you already rolled physical dice for your initiative, fill in the unmodified roll result here. Otherwise, leave it blank and Foundry will roll it for you when the round starts.</div>
	</section>
</form>
